/* -------------------------------- */
/* --- components/forms.css    ---- */
/* --- Ultimate Edition v3.0   ---- */
/* -------------------------------- */

/* --- 1. Группировка и Лейблы --- */
.form-group {
    position: relative;
    margin-bottom: 24px;
}

.form-label,
.input-label {
    display: block;
    margin-bottom: 10px;
    font-size: 0.8rem; /* ~13px */
    font-weight: 700;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding-left: 4px;
    transition: color 0.3s ease;
}

/* Подсветка лейбла, когда пользователь взаимодействует с полем */
.form-group:focus-within .form-label,
.form-group:focus-within .input-label {
    color: #fff;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
}

/* --- 2. Базовые стили полей (Core Inputs) --- */
input[type="text"],
input[type="tel"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="search"],
textarea,
select {
    width: 100%;
    min-height: 56px; /* Стандарт под палец */
    padding: 0 24px;

    border-radius: var(--radius-md); /* 16px из variables */

    /* Фон и Границы */
    background-color: var(--bg-secondary);
    border: 1px solid rgba(255, 255, 255, 0.1);

    /* Типографика */
    color: var(--text-primary);
    font-family: inherit;
    font-size: 1rem;
    font-weight: 500;
    caret-color: var(--accent-color); /* Красный курсор ввода */

    /* Плавность */
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);

    /* Сброс нативных стилей */
    appearance: none;
    -webkit-appearance: none;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1); /* Легкая глубина */
}

/* --- 3. Textarea Specifics --- */
textarea {
    padding-top: 18px;
    padding-bottom: 18px;
    min-height: 120px;
    resize: vertical;
    line-height: 1.5;
}

/* --- 4. Select Specifics --- */
.select-wrapper {
    position: relative;
}

select {
    cursor: pointer;
    padding-right: 48px; /* Место под стрелку */
}

/* Стиль плейсхолдера в селекте (пока не выбран валидный вариант) */
select:invalid {
    color: rgba(255, 255, 255, 0.3);
}

option {
    background-color: var(--bg-secondary);
    color: #fff;
    padding: 12px;
}

/* Кастомная стрелка (SVG) */
.select-wrapper::after {
    content: "";
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    width: 12px;
    height: 12px;

    /* Серая стрелка по умолчанию */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23888' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-size: contain;

    pointer-events: none;
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1),
        filter 0.3s ease;
}

/* Активное состояние стрелки */
.select-wrapper:focus-within::after {
    transform: translateY(-50%) rotate(180deg);
    /* Меняем цвет на красный через фильтр (работает с SVG) */
    filter: invert(33%) sepia(69%) saturate(4460%) hue-rotate(346deg)
        brightness(93%) contrast(106%);
}

/* --- 5. Placeholder --- */
input::placeholder,
textarea::placeholder {
    color: rgba(255, 255, 255, 0.3);
    font-weight: 400;
    transition: opacity 0.3s ease;
}

input:focus::placeholder,
textarea:focus::placeholder {
    opacity: 0.4;
}

/* --- 6. Состояния (States) --- */

/* Hover */
@media (hover: hover) {
    input:not(:disabled):hover,
    textarea:not(:disabled):hover,
    select:not(:disabled):hover {
        border-color: rgba(255, 255, 255, 0.25);
        background-color: #222;
    }
}

/* Focus: Neon Glow & Levitation */
input:focus,
select:focus,
textarea:focus {
    outline: none;
    background-color: #252525;
    border-color: var(--accent-color);

    /* Акцентное свечение */
    box-shadow: 0 0 0 1px var(--accent-color),
        0 0 20px rgba(var(--clr-red-rgb), 0.25);

    transform: translateY(-2px); /* Тактильный отклик */
}

/* Disabled */
input:disabled,
select:disabled,
textarea:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background-color: rgba(255, 255, 255, 0.05);
    border-color: transparent;
}

/* --- 7. AUTOFILL FIX (Dark Mode) --- */
/* Критично: перебивает белый фон Chrome при автозаполнении */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
textarea:-webkit-autofill,
select:-webkit-autofill {
    -webkit-text-fill-color: #fff;
    /* Заливаем внутренней тенью цвета фона */
    -webkit-box-shadow: 0 0 0px 1000px var(--bg-secondary) inset;
    transition: background-color 5000s ease-in-out 0s;
    caret-color: #fff;
}

/* --- 8. Валидация (Validation) --- */

/* Ошибка (.is-error или нативный :invalid после ввода) */
input.is-error,
select.is-error,
textarea.is-error,
input:not(:placeholder-shown):not(:focus):invalid {
    border-color: #ef5350;
    /* Иконка ошибки справа */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Cline x1='12' y1='8' x2='12' y2='12'%3E%3C/line%3E%3Cline x1='12' y1='16' x2='12.01' y2='16'%3E%3C/line%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 16px center;
    background-size: 20px;
    padding-right: 48px;

    animation: shake 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
}

/* Свечение ошибки при фокусе */
input.is-error:focus {
    box-shadow: 0 0 0 1px #ef5350, 0 0 20px rgba(239, 83, 80, 0.25);
    border-color: #ef5350;
}

/* Успех (Опционально) */
input.is-valid:not(:placeholder-shown) {
    border-color: #66bb6a;
}

/* Анимация тряски */
@keyframes shake {
    10%,
    90% {
        transform: translate3d(-1px, 0, 0);
    }
    20%,
    80% {
        transform: translate3d(2px, 0, 0);
    }
    30%,
    50%,
    70% {
        transform: translate3d(-4px, 0, 0);
    }
    40%,
    60% {
        transform: translate3d(4px, 0, 0);
    }
}

/* --- 9. Checkbox (Custom) --- */
/* На случай согласия с политикой конфиденциальности */
.checkbox-wrapper {
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    font-size: 0.85rem;
    color: var(--text-secondary);
    user-select: none;
}
.checkbox-wrapper input {
    display: none;
}
.checkbox-custom {
    width: 20px;
    height: 20px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    position: relative;
    transition: all 0.2s ease;
    background: rgba(255, 255, 255, 0.05);
}
.checkbox-wrapper input:checked + .checkbox-custom {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
    box-shadow: 0 0 10px rgba(229, 57, 53, 0.4);
}
.checkbox-wrapper input:checked + .checkbox-custom::after {
    content: "";
    position: absolute;
    left: 6px;
    top: 2px;
    width: 6px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
}
