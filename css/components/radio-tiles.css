/* -------------------------------- */
/* --- components/radio-tiles.css - */
/* --- Ultimate Edition v5.0   ---- */
/* -------------------------------- */

/* --- Контейнер группы --- */
.radio-group {
    display: flex;
    gap: 12px;
    flex-wrap: wrap; /* Защита от переполнения: элементы перенесутся, если не влезут */
    width: 100%;
    /* Создаем новый контекст наложения, чтобы тени не обрезались */
    isolation: isolate;
}

/* --- 1. Исправление Доступности (Critical A11y Fix) --- */
/* Вместо display: none используем технику sr-only. 
   Инпут невидим глазу, но доступен для Tab-навигации и скринридеров.
*/
.radio-group input {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* --- 2. Стили лейбла (Плитка) --- */
.radio-group label {
    flex: 1; /* Равномерное распределение ширины */
    min-width: 140px; /* Минимальный размер для комфортного нажатия */
    position: relative;

    /* Внутренние отступы */
    padding: 16px 16px;

    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;

    /* Glassmorphism: Матовое стекло */
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);

    /* Тонкие границы */
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-md, 16px);

    /* Типографика */
    font-family: var(--font-main, sans-serif);
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-secondary);

    /* Интерактивность */
    cursor: pointer;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);

    overflow: hidden; /* Скрываем выезжающую галочку */
}

/* --- 3. Hover Effects (Только для мыши) --- */
@media (hover: hover) {
    .radio-group label:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.3);
        color: #fff;
        transform: translateY(-2px); /* Легкая левитация */
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
}

/* Эффект нажатия (Active) */
.radio-group label:active {
    transform: scale(0.98);
}

/* --- 4. Focus State (Навигация с клавиатуры) --- */
/* Рамка появляется ТОЛЬКО при навигации клавишами */
.radio-group input:focus-visible + label {
    outline: none;
    border-color: var(--accent-color);
    box-shadow: 0 0 0 4px rgba(229, 57, 53, 0.3); /* Красный ореол */
    z-index: 10;
}

/* --- 5. Checked State (Выбрано) --- */
.radio-group input:checked + label {
    /* Градиентный фон в цвет бренда */
    background: linear-gradient(
        135deg,
        rgba(229, 57, 53, 0.15) 0%,
        rgba(20, 20, 20, 0.5) 100%
    );

    border-color: var(--accent-color);
    color: #fff;

    /* Сложное свечение */
    box-shadow: 0 8px 25px -5px rgba(229, 57, 53, 0.35),
        inset 0 0 12px rgba(229, 57, 53, 0.1);

    /* Пружинистая анимация (используем переменную или fallback) */
    animation: selectionPop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 2;
}

/* --- 6. Декор: Умная Галочка (Checkmark) --- */
/* Появляется в правом верхнем углу при выборе */
.radio-group label::after {
    content: "✓";
    position: absolute;
    top: 0;
    right: 0;

    display: flex;
    align-items: center;
    justify-content: center;

    width: 22px;
    height: 22px;
    font-size: 11px;
    font-weight: 800;
    color: #fff;

    background: var(--accent-color);
    border-radius: 0 0 0 8px; /* Скругление только внутреннего угла */

    opacity: 0;
    transform: translate(100%, -100%); /* Скрыта за пределами плитки */
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.radio-group input:checked + label::after {
    opacity: 1;
    transform: translate(0, 0); /* Выезжает в угол */
}

/* --- 7. Внутренние элементы --- */

/* 7.1. Цветные точки (3D эффект) */
.color-dot {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    position: relative;
    border: 1px solid rgba(255, 255, 255, 0.2);
    flex-shrink: 0;
    transition: transform 0.3s ease;
}

.color-dot.red {
    /* Градиент рубина */
    background: linear-gradient(135deg, #ff5252 0%, #b71c1c 100%);
    box-shadow: 0 2px 5px rgba(183, 28, 28, 0.5);
}

.color-dot.black {
    /* Градиент черного пластика */
    background: linear-gradient(135deg, #444 0%, #000 100%);
    border-color: rgba(255, 255, 255, 0.2);
}

/* Увеличение точки при выборе */
.radio-group input:checked + label .color-dot {
    transform: scale(1.15);
    border-color: #fff;
}

/* 7.2. Цена (Бейдж) */
.kit-price-tag {
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0.02em;

    background: rgba(255, 255, 255, 0.08);
    padding: 3px 8px;
    border-radius: 6px;
    margin-left: auto; /* Прижимает цену вправо */

    color: var(--text-muted);
    transition: all 0.3s ease;
}

/* При выборе цена загорается */
.radio-group input:checked + label .kit-price-tag {
    background: #fff;
    color: var(--accent-color);
    font-weight: 700;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

/* --- 8. Адаптация для малых экранов --- */
@media (max-width: 380px) {
    .radio-group label {
        padding: 12px;
        font-size: 0.85rem;
        flex-direction: column; /* Вертикальная компоновка */
        text-align: center;
        gap: 8px;
    }

    .kit-price-tag {
        margin-left: 0;
        margin-top: 4px;
        width: 100%;
        text-align: center;
    }
}
