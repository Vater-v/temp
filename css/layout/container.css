/* -------------------------------- */
/* --- layout/container.css    ---- */
/* --- Ultimate Edition v5.0   ---- */
/* -------------------------------- */

/* =========================================
   1. MAIN CONTAINER (Smart Wrapper)
   ========================================= */
.container {
    /* 1. Ширина: берем из переменных, по дефолту 1280px.
       min(100%...) гарантирует, что контейнер не будет шире экрана. */
    width: min(100%, var(--container-width, 1280px));

    /* 2. Центрирование */
    margin-inline: auto;

    /* 3. Умные отступы (Safe Area + Fluid):
       Используем max(), чтобы выбрать наибольшее значение между:
       - Адаптивным отступом (clamp: от 20px до 40px)
       - Безопасными зонами устройства (env: для iPhone "челки")
    */
    padding-inline: max(
        clamp(20px, 5vw, 40px),
        env(safe-area-inset-inline-start),
        env(safe-area-inset-inline-end)
    );

    /* 4. [NEXT-GEN] Container Queries
       Позволяет компонентам внутри (например, карточкам) 
       адаптироваться к ширине этого контейнера, а не всего экрана. */
    container-type: inline-size;
    container-name: main-wrapper;

    position: relative;
}

/* --- Вариации контейнеров --- */

/* Узкий (для текста, статей, политик конфиденциальности) */
.container-narrow {
    --container-width: 860px;
}

/* На всю ширину (для сложных фонов или слайдеров) */
.container-fluid {
    width: 100%;
    max-width: 100%;
    padding-inline: max(20px, env(safe-area-inset-inline-start));
}

/* =========================================
   2. SECTIONS (Vertical Rhythm)
   ========================================= */
section {
    position: relative;
    width: 100%;

    /* Адаптивные отступы сверху/снизу (из variables.css) */
    padding-block: var(--section-spacing, 80px);

    /* Изоляция контекста наложения (z-index внутри не перекроет хедер) */
    isolation: isolate;

    /* overflow: clip — современная замена hidden. 
       Обрезает вылеты (тени, круги), но НЕ ломает position: sticky */
    overflow: clip;
}

/* Утилита для удаления отступов (склейка секций) */
section.no-padding {
    padding-block: 0;
}

/* =========================================
   3. SMART GRID SYSTEMS
   ========================================= */

/* --- 3.1. Адаптивная автоматическая сетка (Auto-Fit) --- */
.grid-container {
    display: grid;
    width: 100%;

    /* Локальные переменные для быстрой настройки "на лету" */
    --grid-min: 280px;
    --grid-gap-local: var(--grid-gap, 30px);

    /* Магическая формула:
       min(100%, var(--grid-min)) — предотвращает гориз. скролл 
       на экранах уже 280px (старые SE, Fold в сложенном виде) */
    grid-template-columns: repeat(
        auto-fit,
        minmax(min(100%, var(--grid-min)), 1fr)
    );

    gap: var(--grid-gap-local);
    align-items: stretch; /* Карточки всегда одной высоты */
}

/* --- Модификаторы сетки --- */
.grid-dense {
    --grid-min: 160px; /* Для логотипов, икон */
    --grid-gap-local: 16px;
}

.grid-wide {
    --grid-min: 400px; /* Для крупных промо-блоков */
}

/* --- 3.2. Жесткие сетки (Explicit Grids) --- */
/* Используем там, где на десктопе нужен строгий порядок (например, Отзывы) */
@media (min-width: 1024px) {
    .grid-cols-2 {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--grid-gap, 30px);
    }
    .grid-cols-3 {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: var(--grid-gap, 30px);
    }
    .grid-cols-4 {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
    }
    /* Сайдбар справа */
    .grid-sidebar-right {
        display: grid;
        grid-template-columns: 1fr 350px;
        gap: 40px;
    }
}

/* =========================================
   4. LAYOUT UTILITIES (Helpers)
   ========================================= */

/* Центрирование всего */
.flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Разброс по краям (Header, Footer) */
.flex-between {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 20px;
}

/* Вертикальный стек (умные отступы между элементами) */
.stack {
    display: flex;
    flex-direction: column;
    gap: var(--stack-gap, 24px);
}

/* Группа элементов (кнопки, теги) */
.group {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 12px;
}
