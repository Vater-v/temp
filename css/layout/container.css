/* -------------------------------- */
/* --- layout/container.css    ---- */
/* -------------------------------- */

/* =========================================
   1. MAIN CONTAINER
   ========================================= */
.container {
  width: min(100%, var(--container-width, 1280px));
  margin-inline: auto;
  padding-inline: max(
    clamp(16px, 5vw, 60px),
    env(safe-area-inset-inline-start),
    env(safe-area-inset-inline-end)
  );
  position: relative;

  /* Container Queries */
  container-type: inline-size;
  container-name: main-wrapper;

  /* Performance */
  contain: layout style;
}

.container-narrow {
  --container-width: 860px;
}

.container-fluid {
  width: 100%;
  max-width: 100%;
  padding-inline: max(16px, env(safe-area-inset-inline-start));
}

/* =========================================
   2. SECTIONS
   ========================================= */
section {
  position: relative;
  width: 100%;
  padding-block: var(--section-spacing, 80px);

  isolation: isolate;
  overflow: clip;

  /* Rendering Performance */
  contain: layout paint;
  content-visibility: auto;
  contain-intrinsic-size: 1px 800px;
}

/* Disable lazy-rendering for Hero/First section */
section.hero,
section:first-of-type {
  content-visibility: visible;
  contain: none;
  contain-intrinsic-size: none;
}

section.no-padding {
  padding-block: 0;
}

@media (max-height: 500px) and (orientation: landscape) {
  section {
    padding-block: clamp(30px, 5vh, 40px);
  }
}

/* =========================================
   3. GRID SYSTEMS
   ========================================= */
.grid-container {
  display: grid;
  width: 100%;

  --grid-min: 280px;
  --grid-gap-local: var(--grid-gap, clamp(20px, 4vw, 40px));

  grid-template-columns: repeat(
    auto-fit,
    minmax(min(100%, var(--grid-min)), 1fr)
  );
  gap: var(--grid-gap-local);
  align-items: stretch;
}

.grid-dense {
  --grid-min: 160px;
  --grid-gap-local: 16px;
}

.grid-wide {
  --grid-min: 400px;
}

/* Mobile Optimization: Force 1 column */
@media (max-width: 640px) {
  .grid-container {
    grid-template-columns: 1fr;
    --grid-gap-local: 24px;
  }

  .grid-dense {
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  }
}

/* Desktop Explicit Grids */
@media (min-width: 1024px) {
  .grid-cols-2 {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--grid-gap, 40px);
  }
  .grid-cols-3 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--grid-gap, 30px);
  }
  .grid-cols-4 {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 24px;
  }
  .grid-sidebar-right {
    display: grid;
    grid-template-columns: 1fr 350px;
    gap: 60px;
  }
}

/* =========================================
   4. LAYOUT UTILITIES & UX
   ========================================= */
.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
}

.stack {
  display: flex;
  flex-direction: column;
  gap: var(--stack-gap, 24px);
}

.group {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 12px;
}

/* Horizontal Scroll Snap (Mobile UX) */
.scroll-x-container {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  scrollbar-width: none;
  -ms-overflow-style: none;

  /* Shadow compensation */
  padding-bottom: 20px;
  margin-bottom: -20px;
}

.scroll-x-container::-webkit-scrollbar {
  display: none;
}

.scroll-x-container > * {
  flex-shrink: 0;
  width: 85%;
  max-width: 320px;
  scroll-snap-align: center;
}

@media (min-width: 1024px) {
  .scroll-x-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    overflow-x: visible;
    padding-bottom: 0;
    margin-bottom: 0;
    width: 100%;
  }
  .scroll-x-container > * {
    width: auto;
    max-width: none;
  }
}
