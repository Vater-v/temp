/* ----------------------------------------------------------------- */
/* --- utilities/effects.css (Ultimate Edition vFinal)          ---- */
/* --- The VFX Library: Glass, Chrome, Glows & GPU Hacks        ---- */
/* ----------------------------------------------------------------- */

/* =========================================
   1. GLASSMORPHISM TIERS (Система Стекла)
   ========================================= */

/* TIER 1: Ghost (Призрачное стекло)
   Использовать для: второстепенных тегов, неактивных кнопок, мелких деталей. */
.glass-ghost {
    background: rgba(255, 255, 255, 0.02);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    border: 1px solid rgba(255, 255, 255, 0.05);
}

/* TIER 2: Panel (Стандартная панель)
   Использовать для: карточек товаров, отзывов, блоков преимуществ.
   Эффект "Толстого стекла" за счет внутренней тени. */
.glass-panel {
    background: rgba(30, 30, 30, 0.5);
    backdrop-filter: blur(16px) saturate(160%);
    -webkit-backdrop-filter: blur(16px) saturate(160%);

    border: 1px solid transparent;
    border-top-color: rgba(255, 255, 255, 0.12); /* Свет сверху */
    border-bottom-color: rgba(0, 0, 0, 0.3); /* Тень снизу */
    border-left-color: rgba(255, 255, 255, 0.05);
    border-right-color: rgba(255, 255, 255, 0.05);

    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05),
        /* Блик на грани */ 0 20px 40px -10px rgba(0, 0, 0, 0.6);
}

/* TIER 3: Obsidian (Премиум-темное стекло)
   Использовать для: модальных окон, липкого хедера, важных форм.
   Максимальный контраст для текста. */
.glass-obsidian {
    background: rgba(10, 10, 10, 0.85);
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);

    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 0 40px 80px rgba(0, 0, 0, 0.8),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* =========================================
   2. TEXT EFFECTS (Типографика)
   ========================================= */

/* Chrome Text (Анимированный металл)
   Для заголовков H1, H2, цен и цифр. */
.text-chrome {
    color: #fff; /* Fallback */
    background: linear-gradient(135deg, #ffffff 20%, #a0a0a0 50%, #ffffff 80%);
    background-size: 200% auto;

    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;

    text-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);

    /* Медленный перелив блеска */
    animation: chromeShine 8s linear infinite;
    will-change: background-position;
}

@keyframes chromeShine {
    to {
        background-position: 200% center;
    }
}

/* Gold Text (Для рейтингов ★★★★★) */
.text-gold {
    background: linear-gradient(135deg, #ffd700 0%, #ffa000 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: #ffd700;
    filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.3));
}

/* Neon Glow (Акцентный свет) */
.text-glow {
    color: #fff;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.6), 0 0 20px var(--accent-color);
}

/* =========================================
   3. ATMOSPHERE & TEXTURES (Фоны)
   ========================================= */

/* Global Noise (Кинематографичный шум)
   Добавлять на <section>, чтобы создать текстуру дорогой пленки. */
.fx-noise {
    position: relative;
    isolation: isolate;
}

.fx-noise::before {
    content: "";
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    /* Оптимизированный SVG шум (Base64) */
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.5'/%3E%3C/svg%3E");
    opacity: 0.04;
    mix-blend-mode: overlay;
    pointer-events: none;
    z-index: -1;
}

/* Ambient Glow (Фоновое пятно света) */
.glow-ambient {
    position: relative;
    z-index: 1;
}

.glow-ambient::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 120%;
    height: 120%;

    background: radial-gradient(circle, var(--accent-color), transparent 70%);
    filter: blur(90px);
    opacity: 0.12;
    z-index: -1;
    pointer-events: none;
}

/* =========================================
   4. INTERACTIVE FX (Блики и Наведение)
   ========================================= */

/* FX Sheen (Пролетающий блик)
   Добавлять на: .card, .btn, .media-wrapper */
.fx-sheen {
    position: relative;
    overflow: hidden; /* Критично: обрезает вылет блика */
}

.fx-sheen::after {
    content: "";
    position: absolute;
    top: 0;
    left: -100%; /* Старт за пределами */
    width: 50%;
    height: 100%;

    background: linear-gradient(
        120deg,
        transparent 0%,
        rgba(255, 255, 255, 0.05) 30%,
        rgba(255, 255, 255, 0.25) 50%,
        rgba(255, 255, 255, 0.05) 70%,
        transparent 100%
    );

    transform: skewX(-25deg);
    pointer-events: none;
    z-index: 10;
    transition: left 0.7s ease;
}

/* Триггер анимации */
@media (hover: hover) {
    .fx-sheen:hover::after {
        left: 200%; /* Финиш за пределами справа */
        transition: left 0.8s ease-in-out;
    }
}

/* Hover Zoom (Кинематографичный зум картинок) */
.hover-zoom {
    overflow: hidden;
    border-radius: inherit;
}

.hover-zoom img,
.hover-zoom video {
    transition: transform 0.8s cubic-bezier(0.19, 1, 0.22, 1), filter 0.5s ease;
    will-change: transform;
}

@media (hover: hover) {
    .hover-zoom:hover img,
    .hover-zoom:hover video {
        transform: scale(1.08);
        filter: brightness(1.1) contrast(1.05);
    }
}

/* =========================================
   5. UTILITIES & BRANDING (Бренд и Хелперы)
   ========================================= */

/* Красная линия (Фирменная строчка) 
   Добавлять внутрь карточек для акцента */
.stitch-line {
    position: relative;
    padding-left: 16px;
}

.stitch-line::before {
    content: "";
    position: absolute;
    left: 0;
    top: 2px;
    bottom: 2px;
    width: 3px;
    background: var(--accent-color);
    border-radius: 4px;
    box-shadow: 0 0 10px var(--accent-color);
}

/* Performance Hacks (Оптимизация) */
.gpu-boost {
    transform: translateZ(0);
    backface-visibility: hidden;
}

/* Умные медиа (фикс прыжков при загрузке) */
img,
video {
    display: block;
    width: 100%;
    height: auto;
    background-color: rgba(255, 255, 255, 0.05); /* Плейсхолдер */
    content-visibility: auto; /* Браузер не рендерит то, что не в экране */
}

/* Маски для плавного исчезновения (Fade Out) */
.mask-bottom {
    mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
}
