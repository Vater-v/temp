/* ----------------------------------------------------------------- */
/* --- utilities/helpers.css (Ultimate Edition vFinal)          ---- */
/* --- The Swiss Army Knife: Layout, Text, FX & A11y            ---- */
/* ----------------------------------------------------------------- */

/* =========================================
   1. LAYOUT PRIMITIVES (Каркас)
   ========================================= */

/* --- Flexbox Shortcuts --- */
.flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

.flex-between {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.flex-col {
    display: flex;
    flex-direction: column;
}

.flex-wrap {
    flex-wrap: wrap;
}

/* --- Positioning --- */
.relative {
    position: relative;
}
.absolute {
    position: absolute;
}
.fixed {
    position: fixed;
}
.sticky {
    position: sticky;
    top: 0;
}

/* Абсолютное центрирование (Иконки, лоадеры) */
.absolute-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/* Растягивание на родителя */
.inset-0 {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
}

/* Растягивание на весь экран (с учетом iOS панелей) */
.full-screen {
    width: 100vw;
    height: 100dvh;
}

/* --- Z-Index Layers (Маппинг на переменные) --- */
.z-back {
    z-index: var(--z-back);
}
.z-base {
    z-index: var(--z-base);
}
.z-sticky {
    z-index: var(--z-sticky);
}
.z-header {
    z-index: var(--z-header);
}
.z-overlay {
    z-index: var(--z-overlay);
}
.z-modal {
    z-index: var(--z-modal);
}

/* --- Stack Pattern (Вертикальный ритм через Gap) --- */
/* Замена margin-bottom для списков */
.stack {
    display: flex;
    flex-direction: column;
    gap: var(--stack-gap, 24px);
}
.stack-sm {
    --stack-gap: 12px;
}
.stack-lg {
    --stack-gap: 40px;
}

/* =========================================
   2. TYPOGRAPHY TOOLS (Работа с текстом)
   ========================================= */

/* --- Alignment --- */
.text-center {
    text-align: center;
}
.text-left {
    text-align: left;
}
.text-right {
    text-align: right;
}

/* --- Transformations --- */
.uppercase {
    text-transform: uppercase;
    letter-spacing: 0.05em;
}
.capitalize {
    text-transform: capitalize;
}
.nowrap {
    white-space: nowrap;
}

/* --- Truncation (Троеточие) --- */
.text-truncate {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
    display: block;
}

/* --- Line Clamp (Обрезка до N строк) --- */
.text-truncate {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
    display: block;
}

.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2; /* Стандартное свойство для совместимости */
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3; /* Стандартное свойство для совместимости */
    -webkit-box-orient: vertical;
    overflow: hidden;
}
/* --- Modern Text Features --- */
/* Балансировка заголовков (убирает висячие слова) */
.text-balance {
    text-wrap: balance;
}
/* Красивые абзацы */
.text-pretty {
    text-wrap: pretty;
}

/* --- Premium Gradients (Утилиты) --- */
.text-gradient-chrome {
    background: linear-gradient(135deg, #fff 30%, #a5a5a5 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: #fff; /* Fallback */
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.text-gradient-gold {
    background: linear-gradient(135deg, #ffd700 0%, #ffa000 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: #ffd700;
}

/* =========================================
   3. VISUAL FX & GLASS (Эффекты)
   ========================================= */

/* --- Backgrounds --- */
.bg-primary {
    background-color: var(--bg-primary);
}
.bg-secondary {
    background-color: var(--bg-secondary);
}
.bg-transparent {
    background-color: transparent;
}

/* --- Reusable Glassmorphism (Система Стекла) --- */
.glass {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.08);
}

.glass-dark {
    background: rgba(10, 10, 10, 0.75);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.08);
}

/* --- Performance Boost --- */
/* Включает GPU для плавности анимаций */
.gpu {
    transform: translateZ(0);
    will-change: transform;
    backface-visibility: hidden;
}

/* --- Overflow Control --- */
.overflow-hidden {
    overflow: hidden;
}
.overflow-visible {
    overflow: visible;
}
.overflow-clip {
    overflow: clip;
} /* Безопасно для sticky */

/* =========================================
   4. INTERACTION (Взаимодействие)
   ========================================= */

/* Отключение событий мыши (сквозной клик для декора) */
.pointer-events-none {
    pointer-events: none;
}
.pointer-events-auto {
    pointer-events: auto;
}

/* Запрет выделения текста (для кнопок и UI) */
.user-select-none {
    user-select: none;
}

/* UX: Расширение области клика без изменения размера элемента */
.clickable {
    position: relative;
    cursor: pointer;
}
.clickable::after {
    content: "";
    position: absolute;
    inset: -10px; /* +10px зона клика вокруг */
    z-index: 1;
}

/* =========================================
   5. ACCESSIBILITY & RESPONSIVE
   ========================================= */

/* --- Screen Readers Only --- */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* --- Responsive Display --- */
.desktop-only {
    display: none !important;
}
.mobile-only {
    display: block !important;
}

@media (min-width: 1024px) {
    .desktop-only {
        display: block !important;
    }
    .mobile-only {
        display: none !important;
    }

    /* Flex-версия для специфичных лейаутов на ПК */
    .d-flex-desktop {
        display: flex !important;
    }
}

/* =========================================
   6. MICRO-COMPONENTS (Reusable Snippets)
   ========================================= */

/* --- Trust Badge (Звезды доверия) --- */
.trust-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;

    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 50px;

    margin-bottom: 24px;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);

    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease, border-color 0.3s ease;
}

.trust-badge:hover {
    transform: translateY(-2px);
    border-color: rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.15);
}

.trust-badge .stars {
    color: #ffd700;
    letter-spacing: 1px;
    font-size: 14px;
}

.trust-badge .trust-text {
    font-size: 13px;
    font-weight: 700;
    color: #eee;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* --- JS Animation Helpers --- */
/* Исправлено: добавлено свойство animation, чтобы элементы появлялись */
.animate-up {
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

/* Stagger Delays (Каскадная задержка) */
.delay-100 {
    animation-delay: 100ms;
}
.delay-200 {
    animation-delay: 200ms;
}
.delay-300 {
    animation-delay: 300ms;
}
